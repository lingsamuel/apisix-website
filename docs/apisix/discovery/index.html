<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<meta name="robots" content="noindex, nofollow">
<link rel="alternate" type="application/rss+xml" href="/apisix-website/blog/rss.xml" title="Apache APISIX‚Ñ¢ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/apisix-website/blog/atom.xml" title="Apache APISIX‚Ñ¢ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WQLBQL6GY3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WQLBQL6GY3",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX‚Ñ¢" href="/apisix-website/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/apisix-website/events/rss.xml" title="Apache APISIX‚Ñ¢ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/apisix-website/events/atom.xml" title="Apache APISIX‚Ñ¢ Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"><title data-react-helmet="true">Integration service discovery registry | Apache APISIX‚Ñ¢</title><meta data-react-helmet="true" property="og:url" content="https://lingsamuel.github.io//apisix-website/docs/apisix/discovery"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-apisix-current"><meta data-react-helmet="true" property="og:title" content="Integration service discovery registry | Apache APISIX‚Ñ¢"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><meta data-react-helmet="true" property="og:image" content="https://lingsamuel.github.io//apisix-website/img/favicon.png"><meta data-react-helmet="true" name="twitter:image" content="https://lingsamuel.github.io//apisix-website/img/favicon.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/apisix-website/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://lingsamuel.github.io//apisix-website/docs/apisix/discovery"><link data-react-helmet="true" rel="alternate" href="https://lingsamuel.github.io//apisix-website/docs/apisix/discovery" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lingsamuel.github.io//apisix-website/zh/docs/apisix/discovery" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://lingsamuel.github.io//apisix-website/docs/apisix/discovery" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/apisix-website/assets/css/styles.f0718333.css">
<link rel="preload" href="/apisix-website/assets/js/runtime~main.7c383bde.js" as="script">
<link rel="preload" href="/apisix-website/assets/js/main.c8d59e2a.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/apisix-website/"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apache APISIX‚Ñ¢</strong></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/apisix-website/docs">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/apisix-website/docs/apisix/getting-started">APISIX‚Ñ¢Ô∏è</a></li><li><a class="dropdown__link" href="/apisix-website/docs/dashboard/USER_GUIDE">APISIX‚Ñ¢Ô∏è Dashboard</a></li><li><a class="dropdown__link" href="/apisix-website/docs/ingress-controller/getting-started/">APISIX‚Ñ¢Ô∏è Ingress Controller</a></li><li><a class="dropdown__link" href="/apisix-website/docs/helm-chart/apisix/">Apache‚Ñ¢Ô∏è APISIX Helm Charts</a></li><li><a class="dropdown__link" href="/apisix-website/docs/docker/build/">Apache‚Ñ¢Ô∏è APISIX Docker</a></li><li><a class="dropdown__link" href="/apisix-website/docs/general/security">General</a></li></ul></div><a class="navbar__item navbar__link" href="/apisix-website/blog">Blog</a><a class="navbar__item navbar__link" href="/apisix-website/events">Events</a><a class="navbar__item navbar__link" href="/apisix-website/downloads">Downloads</a><a class="navbar__item navbar__link" href="/apisix-website/team">Team</a><a class="navbar__item navbar__link" href="/apisix-website/help">Help</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/apisix-website/docs/apisix/discovery" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/apisix-website/zh/docs/apisix/discovery" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/apisix-website/"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apache APISIX‚Ñ¢</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/apisix-website/docs">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/getting-started">APISIX‚Ñ¢Ô∏è</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/dashboard/USER_GUIDE">APISIX‚Ñ¢Ô∏è Dashboard</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/ingress-controller/getting-started/">APISIX‚Ñ¢Ô∏è Ingress Controller</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/helm-chart/apisix/">Apache‚Ñ¢Ô∏è APISIX Helm Charts</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/docker/build/">Apache‚Ñ¢Ô∏è APISIX Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/general/security">General</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/events">Events</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/downloads">Downloads</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/team">Team</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/help">Help</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/apisix-website/docs/apisix/discovery" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/apisix-website/zh/docs/apisix/discovery" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_3AUJ"><div class="docSidebarContainer_2LAn" role="complementary"><div class="sidebar_3jCp sidebarWithHideableNavbar_Uxjr"><a tabindex="-1" class="sidebarLogo_8bKs" href="/apisix-website/"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--dark_hz6m"><strong>Apache APISIX‚Ñ¢</strong></a><div class="menu menu--responsive thin-scrollbar menu_1DcY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_wchL" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a href="https://apisix.apache.org/docs/apisix/getting-started" target="_blank" rel="noreferrer noopener" class="menu__link">Apache APISIX</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture Design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/apisix">APISIX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/route">Route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/plugin">Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/script">Script</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/service">Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/consumer">Consumer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/upstream">Upstream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/global-rule">Global rule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/plugin-config">Plugin Config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/router">Router</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/debug-mode">Debug Mode</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/how-to-build">How to build Apache APISIX</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">General</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/batch-requests">batch-requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/serverless">serverless</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/redirect">redirect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/echo">echo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/server-info">server-info</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Transformation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/response-rewrite">response-rewrite</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/proxy-rewrite">proxy-rewrite</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/grpc-transcode">grpc-transcode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/fault-injection">fault-injection</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Authentication</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/key-auth">key-auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/jwt-auth">jwt-auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/basic-auth">basic-auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/authz-keycloak">authz-keycloak</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/wolf-rbac">wolf-rbac</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/openid-connect">openid-connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/hmac-auth">hmac-auth</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/cors">cors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/uri-blocker">uri-blocker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/ip-restriction">ip-restriction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/referer-restriction">referer-restriction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/consumer-restriction">consumer-restriction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Traffic</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/limit-req">limit-req</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/limit-conn">limit-conn</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/limit-count">limit-count</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/proxy-cache">proxy-cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/request-validation">request-validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/proxy-mirror">proxy-mirror</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/api-breaker">api-breaker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/traffic-split">traffic-split</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/request-id">request-id</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Monitoring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/prometheus">prometheus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/zipkin">Zipkin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/skywalking">skywalking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/node-status">node-status</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Loggers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/http-logger">http-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/tcp-logger">tcp-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/kafka-logger">kafka-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/udp-logger">udp-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/syslog">syslog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/log-rotate">log-rotate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/error-log-logger">error-log-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/sls-logger">sls-logger</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Other Protocols</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/dubbo-proxy">dubbo-proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/mqtt-proxy">mqtt-proxy</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/admin-api">Admin API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/control-api">Control API</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/FAQ">FAQ</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Others</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Discovery</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/apisix-website/docs/apisix/discovery">Integration service discovery registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/discovery/dns">DNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/discovery/consul_kv">consul_kv</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/discovery/nacos">nacos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/discovery/eureka">eureka</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/health-check">Health Check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/router-radixtree">Router radixtree</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/stand-alone">Stand-alone mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/stream-proxy">Stream Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/grpc-proxy">gRPC Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/customize-nginx-configuration">Customize Nginx configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/https">HTTPS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/batch-processor">Batch Processor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/benchmark">Benchmark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/install-dependencies">Install Dependencies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugin-develop">Plugin Develop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugin-interceptors">Plugin interceptors</a></li><li class="menu__list-item"><a href="https://github.com/apache/apisix/blob/master/CODE_STYLE.md" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="0">CODE_STYLE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/debug-function">Debug Function</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/apache/apisix/blob/master/CHANGELOG.md" target="_blank" rel="noreferrer noopener" class="menu__link">CHANGELOG</a></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_3okl"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_1LB5" aria-label="Collapse sidebar"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2AUC"><div class="container padding-vert--lg docItemWrapper_1WZa"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Integration service discovery registry</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="summary"></a>Summary<a class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><p>When system traffic changes, the number of servers of the upstream service also increases or decreases, or the server needs to be replaced due to its hardware failure. If the gateway maintains upstream service information through configuration, the maintenance costs in the microservices architecture pattern are unpredictable. Furthermore, due to the untimely update of these information, will also bring a certain impact for the business, and the impact of human error operation can not be ignored. So it is very necessary for the gateway to automatically get the latest list of service instances through the service registry„ÄÇAs shown in the figure belowÔºö</p><p><img src="https://raw.githubusercontent.com/apache/apisix/master/docs/assets/images/discovery.png"></p><ol><li>When the service starts, it will report some of its information, such as the service name, IP, port and other information to the registry. The services communicate with the registry using a mechanism such as a heartbeat, and if the registry and the service are unable to communicate for a long time, the instance will be cancel.When the service goes offline, the registry will delete the instance information.</li><li>The gateway gets service instance information from the registry in near-real time.</li><li>When the user requests the service through the gateway, the gateway selects one instance from the registry for proxy.</li></ol><p>Common registries: Eureka, Etcd, Consul, Zookeeper, Nacos etc.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="supported-discovery-registries"></a>Supported discovery registries<a class="hash-link" href="#supported-discovery-registries" title="Direct link to heading">#</a></h2><p>Currently we support Eureka/Consul/Nacos and service discovery via DNS.</p><p>For service discovery via DNS, see <a href="/apisix-website/docs/apisix/discovery/dns">service discovery via DNS</a>.</p><p>For Consul, see <a href="/apisix-website/docs/apisix/discovery/consul_kv">service discovery via Consul</a></p><p>For Nacos, see <a href="/apisix-website/docs/apisix/discovery/nacos">service discovery via Nacos</a></p><p>For Eureka, see below.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="how-to-extend-the-discovery-client"></a>How to extend the discovery client?<a class="hash-link" href="#how-to-extend-the-discovery-client" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="basic-steps"></a>Basic steps<a class="hash-link" href="#basic-steps" title="Direct link to heading">#</a></h3><p>It is very easy for APISIX to extend the discovery client, the basic steps are as follows</p><ol><li><p>Add the implementation of registry client in the &#x27;apisix/discovery/&#x27; directory;</p></li><li><p>Implement the <code>_M.init_worker()</code> function for initialization and the <code>_M.nodes(service_name)</code> function for obtaining the list of service instance nodes;</p></li><li><p>If you need the discovery module to export the debugging information online, implement the <code>_M.dump_data()</code> function;</p></li><li><p>Convert the registry data into data in APISIX;</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="the-example-of-eureka"></a>the example of Eureka<a class="hash-link" href="#the-example-of-eureka" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-of-eurekalua"></a>Implementation of eureka.lua<a class="hash-link" href="#implementation-of-eurekalua" title="Direct link to heading">#</a></h4><p>First, add <a href="/apisix/discovery/eureka.lua"><code>eureka.lua</code></a> in the <code>apisix/discovery/</code> directory;</p><p>Then implement the <code>_M.init_worker()</code> function for initialization and the <code>_M.nodes(service_name)</code> function for obtaining the list of service instance nodes in <code>eureka.lua</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><div tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">local _M = {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    version = 1.0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function _M.nodes(service_name)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ... ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function _M.init_worker()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ... ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">function _M.dump_data()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return {config = your_config, services = your_services, other = ... }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">return _M</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="how-convert-eurekas-instance-data-to-apisixs-node"></a>How convert Eureka&#x27;s instance data to APISIX&#x27;s node?<a class="hash-link" href="#how-convert-eurekas-instance-data-to-apisixs-node" title="Direct link to heading">#</a></h4><p>Here&#x27;s an example of Eureka&#x27;s dataÔºö</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;applications&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;application&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">&quot;name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;USER-SERVICE&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">                 # service name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token property">&quot;instance&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;instanceId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.1.100:8761&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;hostName&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.1.100&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;app&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;USER-SERVICE&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">          # service name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;ipAddr&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.1.100&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">      # IP address</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;UP&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;overriddenStatus&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;UNKNOWN&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;port&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          </span><span class="token property">&quot;$&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8761</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          </span><span class="token property">&quot;@enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;securePort&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          </span><span class="token property">&quot;$&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">443</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          </span><span class="token property">&quot;@enabled&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;false&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;metadata&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          </span><span class="token property">&quot;management.port&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;8761&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                          </span><span class="token property">&quot;weight&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain">               # Setting by &#x27;eureka.instance.metadata-map.weight&#x27; of the spring boot application</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;homePageUrl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://192.168.1.100:8761/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;statusPageUrl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://192.168.1.100:8761/actuator/info&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span><span class="token property">&quot;healthCheckUrl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://192.168.1.100:8761/actuator/health&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      ... ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Deal with the Eureka&#x27;s instance data need the following steps :</p><ol><li>select the UP instance. When the value of <code>overriddenStatus</code> is &quot;UP&quot; or the value of <code>overriddenStatus</code> is &quot;UNKNOWN&quot; and the value of <code>status</code> is &quot;UP&quot;.</li><li>Host. The <code>ipAddr</code> is the IP address of instance; and must be IPv4 or IPv6.</li><li>Port. If the value of <code>port[&quot;@enabled&quot;]</code> is equal to &quot;true&quot;, using the value of <code>port[&quot;\$&quot;]</code>, If the value of <code>securePort[&quot;@enabled&quot;]</code> is equal to &quot;true&quot;, using the value of <code>securePort[&quot;\$&quot;]</code>.</li><li>Weight. <code>local weight = metadata.weight or local_conf.eureka.weight or 100</code></li></ol><p>The result of this example is as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;host&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;192.168.1.100&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;port&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8761</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;weight&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;metadata&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;management.port&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;8761&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="configuration-for-discovery-client"></a>Configuration for discovery client<a class="hash-link" href="#configuration-for-discovery-client" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="initial-service-discovery"></a>Initial service discovery<a class="hash-link" href="#initial-service-discovery" title="Direct link to heading">#</a></h3><p>Add the following configuration to <code>conf/config.yaml</code> to add different service discovery clients for dynamic selection during use:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">discovery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">eureka</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This name should be consistent with the file name of the implementation registry in the <code>apisix/discovery/</code> directory.</p><p>The supported discovery client: Eureka.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="configuration-for-eureka"></a>Configuration for Eureka<a class="hash-link" href="#configuration-for-eureka" title="Direct link to heading">#</a></h3><p>Add following configuration in <code>conf/config.yaml</code> Ôºö</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">discovery</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">eureka</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">                            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># it&#x27;s possible to define multiple eureka hosts addresses of the same eureka cluster.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://${username}:${password}@${eureka_host1}:${eureka_port1}&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://${username}:${password}@${eureka_host2}:${eureka_port2}&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">prefix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/eureka/&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fetch_interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30               </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 30s</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100                      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># default weight for node</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">timeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2000                  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 2000ms</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">send</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2000                     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 2000ms</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5000                     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 5000ms</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="upstream-setting"></a>Upstream setting<a class="hash-link" href="#upstream-setting" title="Direct link to heading">#</a></h2><p>Here is an example of routing a request with a URL of &quot;/user/*&quot; to a service which named &quot;user-service&quot; and use eureka discovery client in the registry :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/apisix/admin/routes/1 -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&#x27;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;uri&quot;: &quot;/user/*&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;upstream&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;service_name&quot;: &quot;USER-SERVICE&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;type&quot;: &quot;roundrobin&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;discovery_type&quot;: &quot;eureka&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:rgb(247, 140, 108)">201</span><span class="token plain"> Created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Date: Sat, </span><span class="token number" style="color:rgb(247, 140, 108)">31</span><span class="token plain"> Aug </span><span class="token number" style="color:rgb(247, 140, 108)">2019</span><span class="token plain"> 01:17:15 GMT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: text/plain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Transfer-Encoding: chunked</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connection: keep-alive</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Server: APISIX web server</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;node&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;value&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;uri&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;\/user\/*&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;upstream&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;service_name&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;USER-SERVICE&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;type&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;roundrobin&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;discovery_type&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;eureka&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;createdIndex&quot;</span><span class="token plain">:61925,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;key&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;\/apisix\/routes\/1&quot;</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;modifiedIndex&quot;</span><span class="token plain">:61925</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">,</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;action&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;create&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Because the upstream interface URL may have conflict, usually in the gateway by prefix to distinguish:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/apisix/admin/routes/1 -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&#x27;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;uri&quot;: &quot;/a/*&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;plugins&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;proxy-rewrite&quot; : {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;regex_uri&quot;: [&quot;^/a/(.*)&quot;, &quot;/</span><span class="token string variable" style="color:rgb(191, 199, 213)">${1}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;upstream&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;service_name&quot;: &quot;A-SERVICE&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;type&quot;: &quot;roundrobin&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;discovery_type&quot;: &quot;eureka&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/apisix/admin/routes/2 -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&#x27;</span><span class="token plain"> -X PUT -i -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;uri&quot;: &quot;/b/*&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;plugins&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;proxy-rewrite&quot; : {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;regex_uri&quot;: [&quot;^/b/(.*)&quot;, &quot;/</span><span class="token string variable" style="color:rgb(191, 199, 213)">${1}</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;upstream&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;service_name&quot;: &quot;B-SERVICE&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;type&quot;: &quot;roundrobin&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;discovery_type&quot;: &quot;eureka&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Suppose both A-SERVICE and B-SERVICE provide a <code>/test</code> API. The above configuration allows access to A-SERVICE&#x27;s <code>/test</code> API through <code>/a/test</code> and B-SERVICE&#x27;s <code>/test</code> API through <code>/b/test</code>.</p><p><strong>Notice</strong>ÔºöWhen configuring <code>upstream.service_name</code>,  <code>upstream.nodes</code> will no longer take effect, but will be replaced by &#x27;nodes&#x27; obtained from the registry.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="embedded-control-api-for-debugging"></a>Embedded control api for debugging<a class="hash-link" href="#embedded-control-api-for-debugging" title="Direct link to heading">#</a></h2><p>Sometimes we need the discovery client to export online data snapshot in memory when running for debugging, and if you implement the <code>_M. dump_data()</code> function:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><div tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">function _M.dump_data()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return {config = local_conf.discovery.eureka, services = applications}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Then you can call its control api as below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">GET /v1/discovery/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">discovery_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">/dump</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>eg:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9090/v1/discovery/eureka/dump</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/apache/apisix/edit/master/docs/en/latest/discovery.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/apisix-website/docs/apisix/FAQ"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ FAQ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/apisix-website/docs/apisix/discovery/dns"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DNS ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#summary" class="table-of-contents__link">Summary</a></li><li><a href="#supported-discovery-registries" class="table-of-contents__link">Supported discovery registries</a></li><li><a href="#how-to-extend-the-discovery-client" class="table-of-contents__link">How to extend the discovery client?</a><ul><li><a href="#basic-steps" class="table-of-contents__link">Basic steps</a></li><li><a href="#the-example-of-eureka" class="table-of-contents__link">the example of Eureka</a></li></ul></li><li><a href="#configuration-for-discovery-client" class="table-of-contents__link">Configuration for discovery client</a><ul><li><a href="#initial-service-discovery" class="table-of-contents__link">Initial service discovery</a></li><li><a href="#configuration-for-eureka" class="table-of-contents__link">Configuration for Eureka</a></li></ul></li><li><a href="#upstream-setting" class="table-of-contents__link">Upstream setting</a></li><li><a href="#embedded-control-api-for-debugging" class="table-of-contents__link">Embedded control api for debugging</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">ASF</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issue Tracker</a></li><li class="footer__item"><a href="https://apisix.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://apisix.apache.org/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/apisix-website/img/asf_logo_wide_small.png" alt="Apache Software Foundation" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/apisix-website/img/asf_logo_wide_small.png" alt="Apache Software Foundation" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright ¬© 2019-2021 The Apache Software Foundation. Apache APISIX, APISIX‚Ñ¢, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></div></footer></div>
<script src="/apisix-website/assets/js/runtime~main.7c383bde.js"></script>
<script src="/apisix-website/assets/js/main.c8d59e2a.js"></script>
</body>
</html>