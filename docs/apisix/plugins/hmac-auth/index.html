<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<meta name="robots" content="noindex, nofollow">
<link rel="alternate" type="application/rss+xml" href="/apisix-website/blog/rss.xml" title="Apache APISIX‚Ñ¢ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/apisix-website/blog/atom.xml" title="Apache APISIX‚Ñ¢ Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WQLBQL6GY3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WQLBQL6GY3",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Apache APISIX‚Ñ¢" href="/apisix-website/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/apisix-website/events/rss.xml" title="Apache APISIX‚Ñ¢ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/apisix-website/events/atom.xml" title="Apache APISIX‚Ñ¢ Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"><title data-react-helmet="true">hmac-auth | Apache APISIX‚Ñ¢</title><meta data-react-helmet="true" property="og:url" content="https://lingsamuel.github.io//apisix-website/docs/apisix/plugins/hmac-auth"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-apisix-current"><meta data-react-helmet="true" property="og:title" content="hmac-auth | Apache APISIX‚Ñ¢"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><meta data-react-helmet="true" property="og:image" content="https://lingsamuel.github.io//apisix-website/img/favicon.png"><meta data-react-helmet="true" name="twitter:image" content="https://lingsamuel.github.io//apisix-website/img/favicon.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/apisix-website/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://lingsamuel.github.io//apisix-website/docs/apisix/plugins/hmac-auth"><link data-react-helmet="true" rel="alternate" href="https://lingsamuel.github.io//apisix-website/docs/apisix/plugins/hmac-auth" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://lingsamuel.github.io//apisix-website/zh/docs/apisix/plugins/hmac-auth" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://lingsamuel.github.io//apisix-website/docs/apisix/plugins/hmac-auth" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/apisix-website/assets/css/styles.f0718333.css">
<link rel="preload" href="/apisix-website/assets/js/runtime~main.7c383bde.js" as="script">
<link rel="preload" href="/apisix-website/assets/js/main.c8d59e2a.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/apisix-website/"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apache APISIX‚Ñ¢</strong></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/apisix-website/docs">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/apisix-website/docs/apisix/getting-started">APISIX‚Ñ¢Ô∏è</a></li><li><a class="dropdown__link" href="/apisix-website/docs/dashboard/USER_GUIDE">APISIX‚Ñ¢Ô∏è Dashboard</a></li><li><a class="dropdown__link" href="/apisix-website/docs/ingress-controller/getting-started/">APISIX‚Ñ¢Ô∏è Ingress Controller</a></li><li><a class="dropdown__link" href="/apisix-website/docs/helm-chart/apisix/">Apache‚Ñ¢Ô∏è APISIX Helm Charts</a></li><li><a class="dropdown__link" href="/apisix-website/docs/docker/build/">Apache‚Ñ¢Ô∏è APISIX Docker</a></li><li><a class="dropdown__link" href="/apisix-website/docs/general/security">General</a></li></ul></div><a class="navbar__item navbar__link" href="/apisix-website/blog">Blog</a><a class="navbar__item navbar__link" href="/apisix-website/events">Events</a><a class="navbar__item navbar__link" href="/apisix-website/downloads">Downloads</a><a class="navbar__item navbar__link" href="/apisix-website/team">Team</a><a class="navbar__item navbar__link" href="/apisix-website/help">Help</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/apisix-website/docs/apisix/plugins/hmac-auth" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/apisix-website/zh/docs/apisix/plugins/hmac-auth" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/apisix-website/"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Apache APISIX‚Ñ¢</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/apisix-website/docs">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/getting-started">APISIX‚Ñ¢Ô∏è</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/dashboard/USER_GUIDE">APISIX‚Ñ¢Ô∏è Dashboard</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/ingress-controller/getting-started/">APISIX‚Ñ¢Ô∏è Ingress Controller</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/helm-chart/apisix/">Apache‚Ñ¢Ô∏è APISIX Helm Charts</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/docker/build/">Apache‚Ñ¢Ô∏è APISIX Docker</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/general/security">General</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/events">Events</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/downloads">Downloads</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/team">Team</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/help">Help</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/apisix-website/docs/apisix/plugins/hmac-auth" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/apisix-website/zh/docs/apisix/plugins/hmac-auth" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_3AUJ"><div class="docSidebarContainer_2LAn" role="complementary"><div class="sidebar_3jCp sidebarWithHideableNavbar_Uxjr"><a tabindex="-1" class="sidebarLogo_8bKs" href="/apisix-website/"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/apisix-website/img/logo2.svg" alt="Apache APISIX‚Ñ¢" class="themedImage_1VuW themedImage--dark_hz6m"><strong>Apache APISIX‚Ñ¢</strong></a><div class="menu menu--responsive thin-scrollbar menu_1DcY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_wchL" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a href="https://apisix.apache.org/docs/apisix/getting-started" target="_blank" rel="noreferrer noopener" class="menu__link">Apache APISIX</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Architecture Design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/apisix">APISIX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/route">Route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/plugin">Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/script">Script</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/service">Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/consumer">Consumer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/upstream">Upstream</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/global-rule">Global rule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/plugin-config">Plugin Config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/router">Router</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/architecture-design/debug-mode">Debug Mode</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/how-to-build">How to build Apache APISIX</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">General</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/batch-requests">batch-requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/serverless">serverless</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/redirect">redirect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/echo">echo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/server-info">server-info</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Transformation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/response-rewrite">response-rewrite</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/proxy-rewrite">proxy-rewrite</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/grpc-transcode">grpc-transcode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/fault-injection">fault-injection</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Authentication</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugins/key-auth">key-auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugins/jwt-auth">jwt-auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugins/basic-auth">basic-auth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugins/authz-keycloak">authz-keycloak</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugins/wolf-rbac">wolf-rbac</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apisix-website/docs/apisix/plugins/openid-connect">openid-connect</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/apisix-website/docs/apisix/plugins/hmac-auth">hmac-auth</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/cors">cors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/uri-blocker">uri-blocker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/ip-restriction">ip-restriction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/referer-restriction">referer-restriction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/consumer-restriction">consumer-restriction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Traffic</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/limit-req">limit-req</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/limit-conn">limit-conn</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/limit-count">limit-count</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/proxy-cache">proxy-cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/request-validation">request-validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/proxy-mirror">proxy-mirror</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/api-breaker">api-breaker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/traffic-split">traffic-split</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/request-id">request-id</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Monitoring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/prometheus">prometheus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/zipkin">Zipkin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/skywalking">skywalking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/node-status">node-status</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Loggers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/http-logger">http-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/tcp-logger">tcp-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/kafka-logger">kafka-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/udp-logger">udp-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/syslog">syslog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/log-rotate">log-rotate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/error-log-logger">error-log-logger</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/sls-logger">sls-logger</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Other Protocols</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/dubbo-proxy">dubbo-proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugins/mqtt-proxy">mqtt-proxy</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/admin-api">Admin API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/control-api">Control API</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/apisix-website/docs/apisix/FAQ">FAQ</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Others</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Discovery</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/discovery">Integration service discovery registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/discovery/dns">DNS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/discovery/consul_kv">consul_kv</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/discovery/nacos">nacos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/discovery/eureka">eureka</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/health-check">Health Check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/router-radixtree">Router radixtree</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/stand-alone">Stand-alone mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/stream-proxy">Stream Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/grpc-proxy">gRPC Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/customize-nginx-configuration">Customize Nginx configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/https">HTTPS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/batch-processor">Batch Processor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/benchmark">Benchmark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/install-dependencies">Install Dependencies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugin-develop">Plugin Develop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/plugin-interceptors">Plugin interceptors</a></li><li class="menu__list-item"><a href="https://github.com/apache/apisix/blob/master/CODE_STYLE.md" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">CODE_STYLE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/apisix-website/docs/apisix/debug-function">Debug Function</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/apache/apisix/blob/master/CHANGELOG.md" target="_blank" rel="noreferrer noopener" class="menu__link">CHANGELOG</a></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_3okl"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_1LB5" aria-label="Collapse sidebar"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2AUC"><div class="container padding-vert--lg docItemWrapper_1WZa"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">hmac-auth</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="summary"></a>Summary<a class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><ul><li><a href="#summary">Summary</a></li><li><a href="#name">Name</a></li><li><a href="#attributes">Attributes</a></li><li><a href="#how-to-enable">How To Enable</a></li><li><a href="#test-plugin">Test Plugin</a><ul><li><a href="#generate-signature">generate signature:</a></li><li><a href="#use-the-generated-signature-to-try-the-request">Use the generated signature to try the request</a></li></ul></li><li><a href="#custom-header-key">Custom header key</a></li><li><a href="#disable-plugin">Disable Plugin</a></li><li><a href="#generate-signature-examples">Generate Signature Examples</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="name"></a>Name<a class="hash-link" href="#name" title="Direct link to heading">#</a></h2><p><code>hmac-auth</code> is an authentication plugin that need to work with <code>consumer</code>. Add HMAC Authentication to a <code>service</code> or <code>route</code>.</p><p>The <code>consumer</code> then adds its key to request header to verify its request.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="attributes"></a>Attributes<a class="hash-link" href="#attributes" title="Direct link to heading">#</a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Requirement</th><th>Default</th><th>Valid</th><th>Description</th></tr></thead><tbody><tr><td>access_key</td><td>string</td><td>required</td><td></td><td></td><td>Different <code>consumer</code> objects should have different values, and it should be unique. If different consumers use the same <code>access_key</code>, a request matching exception will occur.</td></tr><tr><td>secret_key</td><td>string</td><td>required</td><td></td><td></td><td>Use as a pair with <code>access_key</code>.</td></tr><tr><td>algorithm</td><td>string</td><td>optional</td><td>&quot;hmac-sha256&quot;</td><td>[&quot;hmac-sha1&quot;, &quot;hmac-sha256&quot;, &quot;hmac-sha512&quot;]</td><td>Encryption algorithm.</td></tr><tr><td>clock_skew</td><td>integer</td><td>optional</td><td>0</td><td></td><td>The clock skew allowed by the signature in seconds. For example, if the time is allowed to skew by 10 seconds, then it should be set to <code>10</code>. especially, <code>0</code> means not checking <code>Date</code></td></tr><tr><td>signed_headers</td><td>array[string]</td><td>optional</td><td></td><td></td><td>Restrict the headers that are added to the encrypted calculation. After the specified, the client request can only specify the headers within this range. When this item is empty, all the headers specified by the client request will be added to the encrypted calculation</td></tr><tr><td>keep_headers</td><td>boolean</td><td>optional</td><td>false</td><td>[ true, false ]</td><td>Whether it is necessary to keep the request headers of <code>X-HMAC-SIGNATURE</code>, <code>X-HMAC-ALGORITHM</code> and <code>X-HMAC-SIGNED-HEADERS</code> in the http request after successful authentication. true: means to keep the http request header, false: means to remove the http request header.</td></tr><tr><td>encode_uri_params</td><td>boolean</td><td>optional</td><td>true</td><td>[ true, false ]</td><td>Whether to encode the uri parameter in the signature, for example: <code>params1=hello%2Cworld</code> is encoded, <code>params2=hello,world</code> is not encoded. true: means to encode the uri parameter in the signature, false: not to encode the uri parameter in the signature.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="how-to-enable"></a>How To Enable<a class="hash-link" href="#how-to-enable" title="Direct link to heading">#</a></h2><ol><li>set a consumer and config the value of the <code>hmac-auth</code> option</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/apisix/admin/consumers -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&#x27;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;username&quot;: &quot;jack&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;plugins&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;hmac-auth&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;access_key&quot;: &quot;user-key&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;secret_key&quot;: &quot;my-secret-key&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;clock_skew&quot;: 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;signed_headers&quot;: [&quot;User-Agent&quot;, &quot;Accept-Language&quot;, &quot;x-custom-a&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The default <code>keep_headers</code> is false and <code>encode_uri_params</code> is true.</p><p>You can visit the dashboard to complete the above operations through the web interface, first add a consumer:
<img src="https://raw.githubusercontent.com/apache/apisix/master/docs/assets/images/plugin/hmac-auth-1.png"></p><p>Then add the hmac-auth plugin to the consumer page:
<img src="https://raw.githubusercontent.com/apache/apisix/master/docs/assets/images/plugin/hmac-auth-2.png"></p><ol start="2"><li>add a Route or add a Service, and enable the <code>hmac-auth</code> plugin</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/apisix/admin/routes/1 -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&#x27;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;uri&quot;: &quot;/index.html&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;plugins&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;hmac-auth&quot;: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;upstream&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;type&quot;: &quot;roundrobin&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;nodes&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;39.97.63.215:80&quot;: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="test-plugin"></a>Test Plugin<a class="hash-link" href="#test-plugin" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="generate-signature"></a>generate signature:<a class="hash-link" href="#generate-signature" title="Direct link to heading">#</a></h3><p>The calculation formula of the signature is <code>signature = HMAC-SHAx-HEX(secret_key, signing_string)</code>. From the formula, it can be seen that in order to obtain the signature, two parameters, <code>SECRET_KEY</code> and <code>signing_STRING</code>, are required. Where secret_key is configured by the corresponding consumer, the calculation formula of <code>signing_STRING</code> is <code>signing_string = signing_string = HTTP Method + \n + HTTP URI + \n + canonical_query_string + \n + access_key + \n + Date + \n + signed_headers_string</code>.</p><ol><li><strong>HTTP Method</strong> : Refers to the GET, PUT, POST and other request methods defined in the HTTP protocol, and must be in all uppercase.</li><li><strong>HTTP URI</strong> : <code>HTTP URI</code> requirements must start with &quot;/&quot;, those that do not start with &quot;/&quot; need to be added, and the empty path is &quot;/&quot;.</li><li><strong>Date</strong> : Date in http header(GMT format).</li><li><strong>canonical_query_string</strong> :<code>canonical_query_string</code> is the result of encoding the <code>query</code> in the URL (<code>query</code> is the string &quot;key1 = valve1 &amp; key2 = valve2&quot; after the &quot;?&quot; in the URL).</li><li><strong>signed_headers_string</strong> :<code>signed_headers_string</code> is the result of obtaining the fields specified by the client from the request header and concatenating the strings in order.</li></ol><blockquote><p>The coding steps of canonical_query_string are as follows:</p></blockquote><ul><li>Extract the <code>query</code> item in the URL, that is, the string &quot;key1 = valve1 &amp; key2 = valve2&quot; after the &quot;?&quot; in the URL.</li><li>Split the <code>query</code> into several items according to the &amp; separator, each item is in the form of key=value or only key.</li><li>According to whether the uri parameter is encoded, there are two situations:</li><li>When <code>encode_uri_params</code> is true:<ul><li>Encoding each item after disassembly is divided into the following two situations.</li><li>When the item has only key, the conversion formula is uri_encode(key) + &quot;=&quot;.</li><li>When the item is in the form of key=value, the conversion formula is in the form of uri_encode(key) + &quot;=&quot; + uri_encode(value). Here value can be an empty string.</li><li>After converting each item, sort by key in lexicographic order (ASCII code from small to large), and connect them with the &amp; symbol to generate the corresponding canonical_query_string.</li></ul></li><li>When <code>encode_uri_params</code> is false:<ul><li>Encoding each item after disassembly is divided into the following two situations.</li><li>When the item has only key, the conversion formula is key + &quot;=&quot;.</li><li>When the item is in the form of key=value, the conversion formula is in the form of key + &quot;=&quot; + value. Here value can be an empty string.</li><li>After converting each item, sort by key in lexicographic order (ASCII code from small to large), and connect them with the &amp; symbol to generate the corresponding canonical_query_string.</li></ul></li></ul><blockquote><p>The signed_headers_string generation steps are as follows:</p></blockquote><ul><li>Obtain the headers specified to be added to the calculation from the request header. For details, please refer to the placement of <code>SIGNED_HEADERS</code> in the next section <code>Use the generated signature to make a request attempt</code>.</li><li>Take out the headers specified by <code>SIGNED_HEADERS</code> in order from the request header, and splice them together in order of <code>name:value</code>. After splicing, a <code>signed_headers_string</code> is generated.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly plain"><div tabindex="0" class="prism-code language-plain codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">HeaderKey1 + &quot;:&quot; + HeaderValue1 + &quot;\n&quot;\+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HeaderKey2 + &quot;:&quot; + HeaderValue2 + &quot;\n&quot;\+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HeaderKeyN + &quot;:&quot; + HeaderValueN + &quot;\n&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>Signature string splicing example</strong></p><p>Take the following request as an example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -i http://127.0.0.1:9080/index.html?name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">james</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">age</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">36</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;X-HMAC-SIGNED-HEADERS: User-Agent;x-custom-a&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;x-custom-a: test&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;User-Agent: curl/7.29.0&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The <code>signing_string</code> generated according to the <code>signature generation formula</code> is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly plain"><div tabindex="0" class="prism-code language-plain codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;GET</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/index.html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">age=36&amp;name=james</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">user-key</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tue, 19 Jan 2021 11:33:20 GMT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">User-Agent:curl/7.29.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">x-custom-a:test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Note: The last request header also needs + <code>\n</code>.</p><p><strong>Generate Signature</strong></p><p>Use Python to generate the signature <code>SIGNATURE</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly python"><div tabindex="0" class="prism-code language-python codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> base64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> hashlib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> hmac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">secret </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;my-secret-key&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">message </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">bytes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;GET</span></div><div class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">/index.html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">age=36&amp;name=james</span></div><div class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">user-key</span></div><div class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">Tue, 19 Jan 2021 11:33:20 GMT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">User-Agent:curl/7.29.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">x-custom-a:test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;utf-8&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin" style="color:rgb(130, 170, 255)">hash</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> hmac</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">new</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">secret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> hashlib</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sha256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># to lowercase base64</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">base64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">b64encode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">hash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">digest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><table><thead><tr><th>Type</th><th>Hash</th></tr></thead><tbody><tr><td>SIGNATURE</td><td>8XV1GB7Tq23OJcoz6wjqTs4ZLxr9DiLoY4PxzScWGYg=</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="use-the-generated-signature-to-try-the-request"></a>Use the generated signature to try the request<a class="hash-link" href="#use-the-generated-signature-to-try-the-request" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://127.0.0.1:9080/index.html?name=james&amp;age=36&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;X-HMAC-SIGNATURE: 8XV1GB7Tq23OJcoz6wjqTs4ZLxr9DiLoY4PxzScWGYg=&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;X-HMAC-ALGORITHM: hmac-sha256&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;X-HMAC-ACCESS-KEY: user-key&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Date: Tue, 19 Jan 2021 11:33:20 GMT&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;X-HMAC-SIGNED-HEADERS: User-Agent;x-custom-a&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;x-custom-a: test&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-H </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;User-Agent: curl/7.29.0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: text/html</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">charset</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">utf-8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Transfer-Encoding: chunked</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connection: keep-alive</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Date: Tue, </span><span class="token number" style="color:rgb(247, 140, 108)">19</span><span class="token plain"> Jan </span><span class="token number" style="color:rgb(247, 140, 108)">2021</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token plain">:33:20 GMT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Server: APISIX/2.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>Below are two assembly forms of signature information</strong></p><ul><li>The signature information is put together in the request header <code>Authorization</code> field:</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/index.html -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Authorization: hmac-auth-v1# + ACCESS_KEY + # + base64_encode(SIGNATURE) + # + ALGORITHM + # + DATE + # + SIGNED_HEADERS&#x27;</span><span class="token plain"> -i</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: text/html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Length: </span><span class="token number" style="color:rgb(247, 140, 108)">13175</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Accept-Ranges: bytes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">DOCTYPE html</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">html </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">lang</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cn&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><ul><li>The signature information is separately placed in the request header:</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/index.html -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-HMAC-SIGNATURE: base64_encode(SIGNATURE)&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-HMAC-ALGORITHM: ALGORITHM&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;Date: DATE&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-HMAC-ACCESS-KEY: ACCESS_KEY&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-HMAC-SIGNED-HEADERS: SIGNED_HEADERS&#x27;</span><span class="token plain"> -i</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: text/html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Length: </span><span class="token number" style="color:rgb(247, 140, 108)">13175</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Accept-Ranges: bytes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">DOCTYPE html</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">html </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">lang</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cn&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>Note:</strong></p><ol><li><strong>ACCESS_KEY, SIGNATURE, ALGORITHM, DATE, SIGNED_HEADERS respectively represent the corresponding variables</strong></li><li><strong>SIGNED_HEADERS is the headers specified by the client to join the encryption calculation. If there are multiple headers, they must be separated by &quot;;&quot;: <code>x-custom-header-a;x-custom-header-b</code></strong></li><li><strong>SIGNATURE needs to use base64 for encryption: <code>base64_encode(SIGNATURE)</code></strong></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="custom-header-key"></a>Custom header key<a class="hash-link" href="#custom-header-key" title="Direct link to heading">#</a></h2><p>We can customize header key for auth parameters by adding the attribute configuration of the plugin under <code>plugin_attr</code> in <code>conf / config.yaml</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">plugin_attr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hmac-auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">signature_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">APISIX</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">HMAC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">SIGNATURE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">algorithm_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">APISIX</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">HMAC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">ALGORITHM</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">date_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">APISIX</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">DATE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">access_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">APISIX</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">HMAC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">ACCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">KEY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">signed_headers_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> X</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">APISIX</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">HMAC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">SIGNED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">HEADERS</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>After customizing the header, request example:</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/index.html -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-APISIX-HMAC-SIGNATURE: base64_encode(SIGNATURE)&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-APISIX-HMAC-ALGORITHM: ALGORITHM&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-APISIX-DATE: DATE&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-APISIX-HMAC-ACCESS-KEY: ACCESS_KEY&#x27;</span><span class="token plain"> -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-APISIX-HMAC-SIGNED-HEADERS: SIGNED_HEADERS&#x27;</span><span class="token plain"> -i</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">HTTP/1.1 </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Type: text/html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Content-Length: </span><span class="token number" style="color:rgb(247, 140, 108)">13175</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Accept-Ranges: bytes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">DOCTYPE html</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">html </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">lang</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;cn&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="disable-plugin"></a>Disable Plugin<a class="hash-link" href="#disable-plugin" title="Direct link to heading">#</a></h2><p>When you want to disable the <code>hmac-auth</code> plugin, it is very simple,
you can delete the corresponding json configuration in the plugin configuration,
no need to restart the service, it will take effect immediately:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> http://127.0.0.1:9080/apisix/admin/routes/1 -H </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;X-API-KEY: edd1c9f034335f136f87ad84b625c8f1&#x27;</span><span class="token plain"> -X PUT -d </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;uri&quot;: &quot;/index.html&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;plugins&quot;: {},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    &quot;upstream&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;type&quot;: &quot;roundrobin&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        &quot;nodes&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">            &quot;39.97.63.215:80&quot;: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">}&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="generate-signature-examples"></a>Generate Signature Examples<a class="hash-link" href="#generate-signature-examples" title="Direct link to heading">#</a></h2><p>Take HMAC SHA256 as an example to introduce the signature generation examples in different languages.
Need to pay attention to the handling of newline characters in signature strings in various languages, which can easily lead to the problem of <code>{&quot;message&quot;:&quot;Invalid signature&quot;}</code>.</p><p>Example inputs:</p><table><thead><tr><th>Variable</th><th>Value</th></tr></thead><tbody><tr><td>secret</td><td>this is secret key</td></tr><tr><td>message</td><td>this is signature string</td></tr></tbody></table><p>Example outputs:</p><table><thead><tr><th>Type</th><th>Hash</th></tr></thead><tbody><tr><td>hexit</td><td>ad1b76c7e5054009380edca35d3f36cc5b6f45c82ee02ea3af64197ebddb9345</td></tr><tr><td>base64</td><td>rRt2x+UFQAk4DtyjXT82zFtvRcgu4C6jr2QZfr3bk0U=</td></tr></tbody></table><p>Please refer to <a href="/apisix-website/docs/apisix/examples/plugins-hmac-auth-generate-signature"><strong>HMAC Generate Signature Examples</strong></a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/apache/apisix/edit/master/docs/en/latest/plugins/hmac-auth.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/apisix-website/docs/apisix/plugins/openid-connect"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ openid-connect</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/apisix-website/docs/apisix/plugins/cors"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">cors ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#summary" class="table-of-contents__link">Summary</a></li><li><a href="#name" class="table-of-contents__link">Name</a></li><li><a href="#attributes" class="table-of-contents__link">Attributes</a></li><li><a href="#how-to-enable" class="table-of-contents__link">How To Enable</a></li><li><a href="#test-plugin" class="table-of-contents__link">Test Plugin</a><ul><li><a href="#generate-signature" class="table-of-contents__link">generate signature:</a></li><li><a href="#use-the-generated-signature-to-try-the-request" class="table-of-contents__link">Use the generated signature to try the request</a></li></ul></li><li><a href="#custom-header-key" class="table-of-contents__link">Custom header key</a></li><li><a href="#disable-plugin" class="table-of-contents__link">Disable Plugin</a></li><li><a href="#generate-signature-examples" class="table-of-contents__link">Generate Signature Examples</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">ASF</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Foundation</a></li><li class="footer__item"><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="footer__link-item">License</a></li><li class="footer__item"><a href="https://www.apache.org/events/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Security</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sponsorship</a></li><li class="footer__item"><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Thanks</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/apisix/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Issue Tracker</a></li><li class="footer__item"><a href="https://apisix.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/ApacheAPISIX" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://apisix.apache.org/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/apisix-website/img/asf_logo_wide_small.png" alt="Apache Software Foundation" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/apisix-website/img/asf_logo_wide_small.png" alt="Apache Software Foundation" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright ¬© 2019-2021 The Apache Software Foundation. Apache APISIX, APISIX‚Ñ¢, Apache, the Apache feather logo, and the Apache APISIX project logo are either registered trademarks or trademarks of the Apache Software Foundation.</div></div></div></footer></div>
<script src="/apisix-website/assets/js/runtime~main.7c383bde.js"></script>
<script src="/apisix-website/assets/js/main.c8d59e2a.js"></script>
</body>
</html>